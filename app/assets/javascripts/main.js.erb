
/********************
 * main.js          *
 ********************/

$(function (){

    $('.book-register-form').on('submit', function (event){
      event.preventDefault();
      var form = $(event.target);

      $.post(form.attr('action'), $(this).serialize(), function (event){
	if (event.status=="success") {
	  form.find('.alert').text(event.message).addClass('alert-success');
	}else{
	  form.find('.alert').text(event.message).addClass('alert-error');
	}

        return false;
      });

      return false;
    });

    $('.book-deleter-form').on('submit', function (event){
      event.preventDefault();
      var form = $(event.target);

      $.post(form.attr('action'), $(this).serialize(), function (event){
	if (event.status=="success") {
	  form.find('.alert').text(event.message).addClass('alert-success');
	}else{
	  form.find('.alert').text(event.message).addClass('alert-error');
	}

        return false;
      });

      return false;
    });

    $('.rating').raty({
      cancel: true,
      starOff: '/assets/raty/star-off.png',
      starOn: '/assets/raty/star-on.png',
      cancelOff: '/assets/raty/cancel-off.png',
      cancelOn: '/assets/raty/cancel-on.png',
      starHalf: '/assets/raty/star-half.png',
      score: function (){
        return $(this).attr('data-score');
      }
    });

});
